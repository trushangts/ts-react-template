{"ast":null,"code":"/*!\n * ClockPicker v0.0.7 (http://weareoutman.github.io/clockpicker/)\n * Copyright 2014 Wang Shenwei.\n * Licensed under MIT (https://github.com/weareoutman/clockpicker/blob/gh-pages/LICENSE)\n */\n!function () {\n  function t(t) {\n    return document.createElementNS(p, t);\n  }\n\n  function i(t) {\n    return (10 > t ? \"0\" : \"\") + t;\n  }\n\n  function e(t) {\n    var i = ++m + \"\";\n    return t ? t + i : i;\n  }\n\n  function s(s, r) {\n    function p(t, i) {\n      var e = u.offset(),\n          s = /^touch/.test(t.type),\n          o = e.left + b,\n          n = e.top + b,\n          p = (s ? t.originalEvent.touches[0] : t).pageX - o,\n          h = (s ? t.originalEvent.touches[0] : t).pageY - n,\n          k = Math.sqrt(p * p + h * h),\n          v = !1;\n\n      if (!i || !(g - y > k || k > g + y)) {\n        t.preventDefault();\n        var m = setTimeout(function () {\n          c.addClass(\"clockpicker-moving\");\n        }, 200);\n        l && u.append(x.canvas), x.setHand(p, h, !i, !0), a.off(d).on(d, function (t) {\n          t.preventDefault();\n          var i = /^touch/.test(t.type),\n              e = (i ? t.originalEvent.touches[0] : t).pageX - o,\n              s = (i ? t.originalEvent.touches[0] : t).pageY - n;\n          (v || e !== p || s !== h) && (v = !0, x.setHand(e, s, !1, !0));\n        }), a.off(f).on(f, function (t) {\n          a.off(f), t.preventDefault();\n          var e = /^touch/.test(t.type),\n              s = (e ? t.originalEvent.changedTouches[0] : t).pageX - o,\n              l = (e ? t.originalEvent.changedTouches[0] : t).pageY - n;\n          (i || v) && s === p && l === h && x.setHand(s, l), \"hours\" === x.currentView ? x.toggleView(\"minutes\", A / 2) : r.autoclose && (x.minutesView.addClass(\"clockpicker-dial-out\"), setTimeout(function () {\n            x.done();\n          }, A / 2)), u.prepend(j), clearTimeout(m), c.removeClass(\"clockpicker-moving\"), a.off(d);\n        });\n      }\n    }\n\n    var h = n(V),\n        u = h.find(\".clockpicker-plate\"),\n        v = h.find(\".clockpicker-hours\"),\n        m = h.find(\".clockpicker-minutes\"),\n        T = h.find(\".clockpicker-am-pm-block\"),\n        C = \"INPUT\" === s.prop(\"tagName\"),\n        H = C ? s : s.find(\"input\"),\n        P = s.find(\".input-group-addon\"),\n        x = this;\n\n    if (this.id = e(\"cp\"), this.element = s, this.options = r, this.isAppended = !1, this.isShown = !1, this.currentView = \"hours\", this.isInput = C, this.input = H, this.addon = P, this.popover = h, this.plate = u, this.hoursView = v, this.minutesView = m, this.amPmBlock = T, this.spanHours = h.find(\".clockpicker-span-hours\"), this.spanMinutes = h.find(\".clockpicker-span-minutes\"), this.spanAmPm = h.find(\".clockpicker-span-am-pm\"), this.amOrPm = \"PM\", r.twelvehour) {\n      {\n        var S = ['<div class=\"clockpicker-am-pm-block\">', '<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button clockpicker-am-button\">', \"AM</button>\", '<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button clockpicker-pm-button\">', \"PM</button>\", \"</div>\"].join(\"\");\n        n(S);\n      }\n      n('<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button am-button\">AM</button>').on(\"click\", function () {\n        x.amOrPm = \"AM\", n(\".clockpicker-span-am-pm\").empty().append(\"AM\");\n      }).appendTo(this.amPmBlock), n('<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button pm-button\">PM</button>').on(\"click\", function () {\n        x.amOrPm = \"PM\", n(\".clockpicker-span-am-pm\").empty().append(\"PM\");\n      }).appendTo(this.amPmBlock);\n    }\n\n    r.autoclose || n('<button type=\"button\" class=\"btn btn-sm btn-default btn-block clockpicker-button\">' + r.donetext + \"</button>\").click(n.proxy(this.done, this)).appendTo(h), \"top\" !== r.placement && \"bottom\" !== r.placement || \"top\" !== r.align && \"bottom\" !== r.align || (r.align = \"left\"), \"left\" !== r.placement && \"right\" !== r.placement || \"left\" !== r.align && \"right\" !== r.align || (r.align = \"top\"), h.addClass(r.placement), h.addClass(\"clockpicker-align-\" + r.align), this.spanHours.click(n.proxy(this.toggleView, this, \"hours\")), this.spanMinutes.click(n.proxy(this.toggleView, this, \"minutes\")), H.on(\"focus.clockpicker click.clockpicker\", n.proxy(this.show, this)), P.on(\"click.clockpicker\", n.proxy(this.toggle, this));\n    var E,\n        D,\n        I,\n        B,\n        z = n('<div class=\"clockpicker-tick\"></div>');\n    if (r.twelvehour) for (E = 1; 13 > E; E += 1) {\n      D = z.clone(), I = E / 6 * Math.PI, B = g, D.css(\"font-size\", \"120%\"), D.css({\n        left: b + Math.sin(I) * B - y,\n        top: b - Math.cos(I) * B - y\n      }), D.html(0 === E ? \"00\" : E), v.append(D), D.on(k, p);\n    } else for (E = 0; 24 > E; E += 1) {\n      D = z.clone(), I = E / 6 * Math.PI;\n      var O = E > 0 && 13 > E;\n      B = O ? w : g, D.css({\n        left: b + Math.sin(I) * B - y,\n        top: b - Math.cos(I) * B - y\n      }), O && D.css(\"font-size\", \"120%\"), D.html(0 === E ? \"00\" : E), v.append(D), D.on(k, p);\n    }\n\n    for (E = 0; 60 > E; E += 5) {\n      D = z.clone(), I = E / 30 * Math.PI, D.css({\n        left: b + Math.sin(I) * g - y,\n        top: b - Math.cos(I) * g - y\n      }), D.css(\"font-size\", \"120%\"), D.html(i(E)), m.append(D), D.on(k, p);\n    }\n\n    if (u.on(k, function (t) {\n      0 === n(t.target).closest(\".clockpicker-tick\").length && p(t, !0);\n    }), l) {\n      var j = h.find(\".clockpicker-canvas\"),\n          L = t(\"svg\");\n      L.setAttribute(\"class\", \"clockpicker-svg\"), L.setAttribute(\"width\", M), L.setAttribute(\"height\", M);\n      var U = t(\"g\");\n      U.setAttribute(\"transform\", \"translate(\" + b + \",\" + b + \")\");\n      var W = t(\"circle\");\n      W.setAttribute(\"class\", \"clockpicker-canvas-bearing\"), W.setAttribute(\"cx\", 0), W.setAttribute(\"cy\", 0), W.setAttribute(\"r\", 2);\n      var N = t(\"line\");\n      N.setAttribute(\"x1\", 0), N.setAttribute(\"y1\", 0);\n      var X = t(\"circle\");\n      X.setAttribute(\"class\", \"clockpicker-canvas-bg\"), X.setAttribute(\"r\", y);\n      var Y = t(\"circle\");\n      Y.setAttribute(\"class\", \"clockpicker-canvas-fg\"), Y.setAttribute(\"r\", 3.5), U.appendChild(N), U.appendChild(X), U.appendChild(Y), U.appendChild(W), L.appendChild(U), j.append(L), this.hand = N, this.bg = X, this.fg = Y, this.bearing = W, this.g = U, this.canvas = j;\n    }\n\n    o(this.options.init);\n  }\n\n  function o(t) {\n    t && \"function\" == typeof t && t();\n  }\n\n  var c,\n      n = window.jQuery,\n      r = n(window),\n      a = n(document),\n      p = \"http://www.w3.org/2000/svg\",\n      l = \"SVGAngle\" in window && function () {\n    var t,\n        i = document.createElement(\"div\");\n    return i.innerHTML = \"<svg/>\", t = (i.firstChild && i.firstChild.namespaceURI) == p, i.innerHTML = \"\", t;\n  }(),\n      h = function () {\n    var t = document.createElement(\"div\").style;\n    return \"transition\" in t || \"WebkitTransition\" in t || \"MozTransition\" in t || \"msTransition\" in t || \"OTransition\" in t;\n  }(),\n      u = \"ontouchstart\" in window,\n      k = \"mousedown\" + (u ? \" touchstart\" : \"\"),\n      d = \"mousemove.clockpicker\" + (u ? \" touchmove.clockpicker\" : \"\"),\n      f = \"mouseup.clockpicker\" + (u ? \" touchend.clockpicker\" : \"\"),\n      v = navigator.vibrate ? \"vibrate\" : navigator.webkitVibrate ? \"webkitVibrate\" : null,\n      m = 0,\n      b = 100,\n      g = 80,\n      w = 54,\n      y = 13,\n      M = 2 * b,\n      A = h ? 350 : 1,\n      V = ['<div class=\"popover clockpicker-popover\">', '<div class=\"arrow\"></div>', '<div class=\"popover-title\">', '<span class=\"clockpicker-span-hours text-primary\"></span>', \" : \", '<span class=\"clockpicker-span-minutes\"></span>', '<span class=\"clockpicker-span-am-pm\"></span>', \"</div>\", '<div class=\"popover-content\">', '<div class=\"clockpicker-plate\">', '<div class=\"clockpicker-canvas\"></div>', '<div class=\"clockpicker-dial clockpicker-hours\"></div>', '<div class=\"clockpicker-dial clockpicker-minutes clockpicker-dial-out\"></div>', \"</div>\", '<span class=\"clockpicker-am-pm-block\">', \"</span>\", \"</div>\", \"</div>\"].join(\"\");\n\n  s.DEFAULTS = {\n    \"default\": \"\",\n    fromnow: 0,\n    placement: \"bottom\",\n    align: \"left\",\n    donetext: \"完成\",\n    autoclose: !1,\n    twelvehour: !1,\n    vibrate: !0\n  }, s.prototype.toggle = function () {\n    this[this.isShown ? \"hide\" : \"show\"]();\n  }, s.prototype.locate = function () {\n    var t = this.element,\n        i = this.popover,\n        e = t.offset(),\n        s = t.outerWidth(),\n        o = t.outerHeight(),\n        c = this.options.placement,\n        n = this.options.align,\n        r = {};\n\n    switch (i.show(), c) {\n      case \"bottom\":\n        r.top = e.top + o;\n        break;\n\n      case \"right\":\n        r.left = e.left + s;\n        break;\n\n      case \"top\":\n        r.top = e.top - i.outerHeight();\n        break;\n\n      case \"left\":\n        r.left = e.left - i.outerWidth();\n    }\n\n    switch (n) {\n      case \"left\":\n        r.left = e.left;\n        break;\n\n      case \"right\":\n        r.left = e.left + s - i.outerWidth();\n        break;\n\n      case \"top\":\n        r.top = e.top;\n        break;\n\n      case \"bottom\":\n        r.top = e.top + o - i.outerHeight();\n    }\n\n    i.css(r);\n  }, s.prototype.show = function () {\n    if (!this.isShown) {\n      o(this.options.beforeShow);\n      var t = this;\n      this.isAppended || (c = n(document.body).append(this.popover), r.on(\"resize.clockpicker\" + this.id, function () {\n        t.isShown && t.locate();\n      }), this.isAppended = !0);\n      var e = ((this.input.prop(\"value\") || this.options[\"default\"] || \"\") + \"\").split(\":\");\n\n      if (\"now\" === e[0]) {\n        var s = new Date(+new Date() + this.options.fromnow);\n        e = [s.getHours(), s.getMinutes()];\n      }\n\n      this.hours = +e[0] || 0, this.minutes = +e[1] || 0, this.spanHours.html(i(this.hours)), this.spanMinutes.html(i(this.minutes)), this.toggleView(\"hours\"), this.locate(), this.isShown = !0, a.on(\"click.clockpicker.\" + this.id + \" focusin.clockpicker.\" + this.id, function (i) {\n        var e = n(i.target);\n        0 === e.closest(t.popover).length && 0 === e.closest(t.addon).length && 0 === e.closest(t.input).length && t.hide();\n      }), a.on(\"keyup.clockpicker.\" + this.id, function (i) {\n        27 === i.keyCode && t.hide();\n      }), o(this.options.afterShow);\n    }\n  }, s.prototype.hide = function () {\n    o(this.options.beforeHide), this.isShown = !1, a.off(\"click.clockpicker.\" + this.id + \" focusin.clockpicker.\" + this.id), a.off(\"keyup.clockpicker.\" + this.id), this.popover.hide(), o(this.options.afterHide);\n  }, s.prototype.toggleView = function (t, i) {\n    var e = !1;\n    \"minutes\" === t && \"visible\" === n(this.hoursView).css(\"visibility\") && (o(this.options.beforeHourSelect), e = !0);\n    var s = \"hours\" === t,\n        c = s ? this.hoursView : this.minutesView,\n        r = s ? this.minutesView : this.hoursView;\n    this.currentView = t, this.spanHours.toggleClass(\"text-primary\", s), this.spanMinutes.toggleClass(\"text-primary\", !s), r.addClass(\"clockpicker-dial-out\"), c.css(\"visibility\", \"visible\").removeClass(\"clockpicker-dial-out\"), this.resetClock(i), clearTimeout(this.toggleViewTimer), this.toggleViewTimer = setTimeout(function () {\n      r.css(\"visibility\", \"hidden\");\n    }, A), e && o(this.options.afterHourSelect);\n  }, s.prototype.resetClock = function (t) {\n    var i = this.currentView,\n        e = this[i],\n        s = \"hours\" === i,\n        o = Math.PI / (s ? 6 : 30),\n        c = e * o,\n        n = s && e > 0 && 13 > e ? w : g,\n        r = Math.sin(c) * n,\n        a = -Math.cos(c) * n,\n        p = this;\n    l && t ? (p.canvas.addClass(\"clockpicker-canvas-out\"), setTimeout(function () {\n      p.canvas.removeClass(\"clockpicker-canvas-out\"), p.setHand(r, a);\n    }, t)) : this.setHand(r, a);\n  }, s.prototype.setHand = function (t, e, s, o) {\n    var c,\n        r = Math.atan2(t, -e),\n        a = \"hours\" === this.currentView,\n        p = Math.PI / (a || s ? 6 : 30),\n        h = Math.sqrt(t * t + e * e),\n        u = this.options,\n        k = a && (g + w) / 2 > h,\n        d = k ? w : g;\n    if (u.twelvehour && (d = g), 0 > r && (r = 2 * Math.PI + r), c = Math.round(r / p), r = c * p, u.twelvehour ? a ? 0 === c && (c = 12) : (s && (c *= 5), 60 === c && (c = 0)) : a ? (12 === c && (c = 0), c = k ? 0 === c ? 12 : c : 0 === c ? 0 : c + 12) : (s && (c *= 5), 60 === c && (c = 0)), this[this.currentView] !== c && v && this.options.vibrate && (this.vibrateTimer || (navigator[v](10), this.vibrateTimer = setTimeout(n.proxy(function () {\n      this.vibrateTimer = null;\n    }, this), 100))), this[this.currentView] = c, this[a ? \"spanHours\" : \"spanMinutes\"].html(i(c)), !l) return void this[a ? \"hoursView\" : \"minutesView\"].find(\".clockpicker-tick\").each(function () {\n      var t = n(this);\n      t.toggleClass(\"active\", c === +t.html());\n    });\n    o || !a && c % 5 ? (this.g.insertBefore(this.hand, this.bearing), this.g.insertBefore(this.bg, this.fg), this.bg.setAttribute(\"class\", \"clockpicker-canvas-bg clockpicker-canvas-bg-trans\")) : (this.g.insertBefore(this.hand, this.bg), this.g.insertBefore(this.fg, this.bg), this.bg.setAttribute(\"class\", \"clockpicker-canvas-bg\"));\n    var f = Math.sin(r) * d,\n        m = -Math.cos(r) * d;\n    this.hand.setAttribute(\"x2\", f), this.hand.setAttribute(\"y2\", m), this.bg.setAttribute(\"cx\", f), this.bg.setAttribute(\"cy\", m), this.fg.setAttribute(\"cx\", f), this.fg.setAttribute(\"cy\", m);\n  }, s.prototype.done = function () {\n    o(this.options.beforeDone), this.hide();\n    var t = this.input.prop(\"value\"),\n        e = i(this.hours) + \":\" + i(this.minutes);\n    this.options.twelvehour && (e += this.amOrPm), this.input.prop(\"value\", e), e !== t && (this.input.triggerHandler(\"change\"), this.isInput || this.element.trigger(\"change\")), this.options.autoclose && this.input.trigger(\"blur\"), o(this.options.afterDone);\n  }, s.prototype.remove = function () {\n    this.element.removeData(\"clockpicker\"), this.input.off(\"focus.clockpicker click.clockpicker\"), this.addon.off(\"click.clockpicker\"), this.isShown && this.hide(), this.isAppended && (r.off(\"resize.clockpicker\" + this.id), this.popover.remove());\n  }, n.fn.clockpicker = function (t) {\n    var i = Array.prototype.slice.call(arguments, 1);\n    return this.each(function () {\n      var e = n(this),\n          o = e.data(\"clockpicker\");\n      if (o) \"function\" == typeof o[t] && o[t].apply(o, i);else {\n        var c = n.extend({}, s.DEFAULTS, e.data(), \"object\" == typeof t && t);\n        e.data(\"clockpicker\", new s(e, c));\n      }\n    });\n  };\n}();","map":null,"metadata":{},"sourceType":"script"}