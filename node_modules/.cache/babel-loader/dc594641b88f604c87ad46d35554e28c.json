{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/reactApp/React_16.x/src/common/activities/components/Activities.js\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport { getJSON } from \"../../utils/functions\";\nimport { Moment } from \"../../utils/components\";\nimport $ from \"jquery\";\nimport { Notification } from \"./Notification\";\nimport { Task } from \"./Task\";\nimport { Message } from \"./Message\";\nvar Components = {\n  message: Message,\n  notification: Notification,\n  task: Task\n};\nexport var Activities =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Activities, _React$Component);\n\n  function Activities() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Activities);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Activities)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      activity: {\n        data: []\n      },\n      activities: [],\n      lastUpdate: new Date()\n    };\n    _this._active = false;\n\n    _this.setActivity = function (activity) {\n      _this.setState({\n        activity: activity\n      });\n    };\n\n    _this.toggleDropdown = function (e) {\n      e.preventDefault();\n      var $dropdown = $(_this.refs.dropdown);\n      var $dropdownToggle = $(_this.refs.dropdownToggle);\n\n      if (_this._active) {\n        $dropdown.fadeOut(150);\n      } else {\n        $dropdown.fadeIn(150);\n      }\n\n      _this._active = !_this._active;\n      $dropdownToggle.toggleClass(\"active\", _this._active);\n    };\n\n    _this.update = function () {\n      $(_this.refs.loadingText).html(\"Loading...\");\n      $(_this.refs.loadingSpin).addClass(\"fa-spin\");\n\n      _this.fetch().then(function () {\n        $(_this.refs.loadingText).html(\"\");\n        $(_this.refs.loadingSpin).removeClass(\"fa-spin\");\n      });\n    };\n\n    _this.fetch = function () {\n      return getJSON(\"assets/api/activities/activities.json\").then(function (activities) {\n        _this.setState({\n          activities: activities,\n          activity: activities[0],\n          lastUpdate: new Date()\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Activities, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var activities = this.state.activities;\n      var activity = this.state.activity;\n      var count = activities.reduce(function (sum, a) {\n        return sum + a.data.length;\n      }, 0);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"activity\",\n        onClick: this.toggleDropdown,\n        ref: \"dropdownToggle\",\n        className: \"activity-dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }), React.createElement(\"b\", {\n        className: \"badge bg-color-red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, count)), React.createElement(\"div\", {\n        className: \"ajax-dropdown\",\n        ref: \"dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"btn-group btn-group-justified\",\n        \"data-toggle\": \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, activities.map(function (_activity, idx) {\n        return React.createElement(\"label\", {\n          className: classnames([\"btn\", \"btn-default\", {\n            active: _activity.name === activity.name\n          }]),\n          key: idx,\n          onClick: _this2.setActivity.bind(_this2, _activity),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"radio\",\n          name: \"activity\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }), _activity.title, \" (\", _activity.data.length + 1, \")\");\n      })), React.createElement(\"div\", {\n        className: \"ajax-notifications custom-scroll\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"notification-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, activity.data.map(function (item, idx) {\n        var component = Components[item.type];\n        return React.createElement(\"li\", {\n          key: idx,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(component, {\n          item: item,\n          lastUpdated: _this2.state.lastUpdated\n        }));\n      }))), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Last updated on:\", React.createElement(Moment, {\n        data: this.state.lastUpdate,\n        format: \"h:mm:ss a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.update,\n        className: \"btn btn-xs btn-default pull-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        ref: \"loadingSpin\",\n        className: \"fa fa-refresh\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        ref: \"loadingText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })))));\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.fetch();\n    }\n  }]);\n\n  return Activities;\n}(React.Component);","map":{"version":3,"sources":["/opt/lampp/htdocs/reactApp/React_16.x/src/common/activities/components/Activities.js"],"names":["React","classnames","getJSON","Moment","$","Notification","Task","Message","Components","message","notification","task","Activities","state","activity","data","activities","lastUpdate","Date","_active","setActivity","setState","toggleDropdown","e","preventDefault","$dropdown","refs","dropdown","$dropdownToggle","dropdownToggle","fadeOut","fadeIn","toggleClass","update","loadingText","html","loadingSpin","addClass","fetch","then","removeClass","count","reduce","sum","a","length","map","_activity","idx","active","name","bind","title","item","component","type","createElement","lastUpdated","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classnames from \"classnames\";\nimport { getJSON } from \"../../utils/functions\";\nimport { Moment } from \"../../utils/components\";\n\nimport $ from \"jquery\";\n\nimport { Notification } from \"./Notification\";\nimport { Task } from \"./Task\";\nimport { Message } from \"./Message\";\n\nconst Components = {\n  message: Message,\n  notification: Notification,\n  task: Task\n};\n\nexport class Activities extends React.Component {\n  state = {\n    activity: {\n      data: []\n    },\n    activities: [],\n    lastUpdate: new Date()\n  };\n  _active = false;\n\n  render() {\n    const activities = this.state.activities;\n    const activity = this.state.activity;\n\n    const count = activities.reduce((sum, a) => sum + a.data.length, 0);\n\n    return (\n      <div>\n        <span\n          id=\"activity\"\n          onClick={this.toggleDropdown}\n          ref=\"dropdownToggle\"\n          className=\"activity-dropdown\"\n        >\n          <i className=\"fa fa-user\" />\n          <b className=\"badge bg-color-red\">{count}</b>\n        </span>\n        <div className=\"ajax-dropdown\" ref=\"dropdown\">\n          <div className=\"btn-group btn-group-justified\" data-toggle=\"buttons\">\n            {activities.map((_activity, idx) => {\n              return (\n                <label\n                  className={classnames([\n                    \"btn\",\n                    \"btn-default\",\n                    {\n                      active: _activity.name === activity.name\n                    }\n                  ])}\n                  key={idx}\n                  onClick={this.setActivity.bind(this, _activity)}\n                >\n                  <input type=\"radio\" name=\"activity\" />\n                  {_activity.title} ({_activity.data.length + 1})\n                </label>\n              );\n            })}\n          </div>\n\n          {/* notification content */}\n          <div className=\"ajax-notifications custom-scroll\">\n            <ul className=\"notification-body\">\n              {activity.data.map((item, idx) => {\n                let component = Components[item.type];\n                return (\n                  <li key={idx}>\n                    {React.createElement(component, {\n                      item: item,\n                      lastUpdated: this.state.lastUpdated\n                    })}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n          {/* end notification content */}\n\n          {/* footer: refresh area */}\n          <span>\n            Last updated on:\n            <Moment data={this.state.lastUpdate} format=\"h:mm:ss a\" />\n            <button\n              type=\"button\"\n              onClick={this.update}\n              className=\"btn btn-xs btn-default pull-right\"\n            >\n              <i ref=\"loadingSpin\" className=\"fa fa-refresh\" />\n              <span ref=\"loadingText\" />\n            </button>\n          </span>\n          {/* end footer */}\n        </div>\n      </div>\n    );\n  }\n\n  setActivity = activity => {\n    this.setState({\n      activity\n    });\n  };\n\n  toggleDropdown = e => {\n    e.preventDefault();\n    const $dropdown = $(this.refs.dropdown);\n    const $dropdownToggle = $(this.refs.dropdownToggle);\n\n    if (this._active) {\n      $dropdown.fadeOut(150);\n    } else {\n      $dropdown.fadeIn(150);\n    }\n\n    this._active = !this._active;\n    $dropdownToggle.toggleClass(\"active\", this._active);\n  };\n\n  componentWillMount() {\n    this.fetch();\n  }\n\n  update = () => {\n    $(this.refs.loadingText).html(\"Loading...\");\n    $(this.refs.loadingSpin).addClass(\"fa-spin\");\n    this.fetch().then(() => {\n      $(this.refs.loadingText).html(\"\");\n      $(this.refs.loadingSpin).removeClass(\"fa-spin\");\n    });\n  };\n\n  fetch = () => {\n    return getJSON(\"assets/api/activities/activities.json\").then(activities => {\n      this.setState({\n        activities: activities,\n        activity: activities[0],\n        lastUpdate: new Date()\n      });\n    });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}