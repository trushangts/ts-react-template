{"ast":null,"code":"import _objectSpread from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/reactApp/React_16.x/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/reactApp/React_16.x/src/common/ui/components/jquery/UiAjaxAutocomplete.js\";\nimport React from \"react\";\nimport $ from \"jquery\";\nimport \"smartadmin-plugins/es6/jquery-ui.min\";\nimport { getJSON } from \"../../../utils/functions\";\n\nvar UiAjaxAutocomplete =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UiAjaxAutocomplete, _React$Component);\n\n  function UiAjaxAutocomplete() {\n    _classCallCheck(this, UiAjaxAutocomplete);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UiAjaxAutocomplete).apply(this, arguments));\n  }\n\n  _createClass(UiAjaxAutocomplete, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      function split(val) {\n        return val.split(/,\\s*/);\n      }\n\n      function extractLast(term) {\n        return split(term).pop();\n      }\n\n      function extractFirst(term) {\n        return split(term)[0];\n      }\n\n      var element = $(this.refs.input);\n      element.autocomplete({\n        source: function source(request, response) {\n          getJSON(\"http://gd.geobytes.com/AutoCompleteCity?callback=?&q=\" + extractLast(request.term)).then(function (data) {\n            response(data);\n          });\n        },\n        minLength: 3,\n        select: function select(event, ui) {\n          var selectedObj = ui.item,\n              placeName = selectedObj.value;\n          if (typeof placeName === \"undefined\") placeName = element.val();\n\n          if (placeName) {\n            var terms = split(element.val()); // remove the current input\n\n            terms.pop(); // add the selected item (city only)\n\n            terms.push(extractFirst(placeName)); // add placeholder to get the comma-and-space at the end\n\n            terms.push(\"\");\n            if (_this.props.onFind) _this.props.onFind(terms.join(\", \"));\n          }\n\n          return false;\n        },\n        focus: function focus() {\n          // prevent value inserted on focus\n          return false;\n        },\n        delay: 100\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = _objectSpread({}, this.props),\n          onFind = _this$props.onFind,\n          props = _objectWithoutProperties(_this$props, [\"onFind\"]);\n\n      return React.createElement(\"input\", Object.assign({\n        type: \"text\"\n      }, props, {\n        ref: \"input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UiAjaxAutocomplete;\n}(React.Component);\n\nexport { UiAjaxAutocomplete as default };","map":{"version":3,"sources":["/opt/lampp/htdocs/reactApp/React_16.x/src/common/ui/components/jquery/UiAjaxAutocomplete.js"],"names":["React","$","getJSON","UiAjaxAutocomplete","split","val","extractLast","term","pop","extractFirst","element","refs","input","autocomplete","source","request","response","then","data","minLength","select","event","ui","selectedObj","item","placeName","value","terms","push","props","onFind","join","focus","delay","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAO,sCAAP;AAEA,SAASC,OAAT,QAAwB,0BAAxB;;IAEqBC,kB;;;;;;;;;;;;;wCACC;AAAA;;AAClB,eAASC,KAAT,CAAeC,GAAf,EAAoB;AAClB,eAAOA,GAAG,CAACD,KAAJ,CAAU,MAAV,CAAP;AACD;;AAED,eAASE,WAAT,CAAqBC,IAArB,EAA2B;AACzB,eAAOH,KAAK,CAACG,IAAD,CAAL,CAAYC,GAAZ,EAAP;AACD;;AAED,eAASC,YAAT,CAAsBF,IAAtB,EAA4B;AAC1B,eAAOH,KAAK,CAACG,IAAD,CAAL,CAAY,CAAZ,CAAP;AACD;;AAED,UAAIG,OAAO,GAAGT,CAAC,CAAC,KAAKU,IAAL,CAAUC,KAAX,CAAf;AAEAF,MAAAA,OAAO,CAACG,YAAR,CAAqB;AACnBC,QAAAA,MAAM,EAAE,gBAACC,OAAD,EAAUC,QAAV,EAAuB;AAC7Bd,UAAAA,OAAO,CACL,0DACEI,WAAW,CAACS,OAAO,CAACR,IAAT,CAFR,CAAP,CAGEU,IAHF,CAGO,UAAAC,IAAI,EAAI;AACbF,YAAAA,QAAQ,CAACE,IAAD,CAAR;AACD,WALD;AAMD,SARkB;AASnBC,QAAAA,SAAS,EAAE,CATQ;AAUnBC,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAQC,EAAR,EAAe;AACrB,cAAIC,WAAW,GAAGD,EAAE,CAACE,IAArB;AAAA,cACEC,SAAS,GAAGF,WAAW,CAACG,KAD1B;AAEA,cAAI,OAAOD,SAAP,KAAqB,WAAzB,EAAsCA,SAAS,GAAGf,OAAO,CAACL,GAAR,EAAZ;;AAEtC,cAAIoB,SAAJ,EAAe;AACb,gBAAIE,KAAK,GAAGvB,KAAK,CAACM,OAAO,CAACL,GAAR,EAAD,CAAjB,CADa,CAEb;;AACAsB,YAAAA,KAAK,CAACnB,GAAN,GAHa,CAIb;;AACAmB,YAAAA,KAAK,CAACC,IAAN,CAAWnB,YAAY,CAACgB,SAAD,CAAvB,EALa,CAMb;;AACAE,YAAAA,KAAK,CAACC,IAAN,CAAW,EAAX;AAEA,gBAAI,KAAI,CAACC,KAAL,CAAWC,MAAf,EAAuB,KAAI,CAACD,KAAL,CAAWC,MAAX,CAAkBH,KAAK,CAACI,IAAN,CAAW,IAAX,CAAlB;AACxB;;AAED,iBAAO,KAAP;AACD,SA5BkB;AA6BnBC,QAAAA,KA7BmB,mBA6BX;AACN;AACA,iBAAO,KAAP;AACD,SAhCkB;AAiCnBC,QAAAA,KAAK,EAAE;AAjCY,OAArB;AAmCD;;;6BAEQ;AAAA,0CAC2B,KAAKJ,KADhC;AAAA,UACCC,MADD,eACCA,MADD;AAAA,UACYD,KADZ;;AAGP,aAAO;AAAO,QAAA,IAAI,EAAC;AAAZ,SAAuBA,KAAvB;AAA8B,QAAA,GAAG,EAAC,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACD;;;;EAzD6C7B,KAAK,CAACkC,S;;SAAjC/B,kB","sourcesContent":["import React from \"react\";\n\nimport $ from \"jquery\";\nimport \"smartadmin-plugins/es6/jquery-ui.min\";\n\nimport { getJSON } from \"../../../utils/functions\";\n\nexport default class UiAjaxAutocomplete extends React.Component {\n  componentDidMount() {\n    function split(val) {\n      return val.split(/,\\s*/);\n    }\n\n    function extractLast(term) {\n      return split(term).pop();\n    }\n\n    function extractFirst(term) {\n      return split(term)[0];\n    }\n\n    let element = $(this.refs.input);\n\n    element.autocomplete({\n      source: (request, response) => {\n        getJSON(\n          \"http://gd.geobytes.com/AutoCompleteCity?callback=?&q=\" +\n            extractLast(request.term)\n        ).then(data => {\n          response(data);\n        });\n      },\n      minLength: 3,\n      select: (event, ui) => {\n        var selectedObj = ui.item,\n          placeName = selectedObj.value;\n        if (typeof placeName === \"undefined\") placeName = element.val();\n\n        if (placeName) {\n          var terms = split(element.val());\n          // remove the current input\n          terms.pop();\n          // add the selected item (city only)\n          terms.push(extractFirst(placeName));\n          // add placeholder to get the comma-and-space at the end\n          terms.push(\"\");\n\n          if (this.props.onFind) this.props.onFind(terms.join(\", \"));\n        }\n\n        return false;\n      },\n      focus() {\n        // prevent value inserted on focus\n        return false;\n      },\n      delay: 100\n    });\n  }\n\n  render() {\n    const { onFind, ...props } = { ...this.props };\n\n    return <input type=\"text\" {...props} ref=\"input\" />;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}