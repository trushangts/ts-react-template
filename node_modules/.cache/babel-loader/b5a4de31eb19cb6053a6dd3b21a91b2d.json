{"ast":null,"code":"import { config } from \"../../config/config\";\nimport { mute, soundOn, playAudio } from \"../utils/functions/sound\";\nimport { smallBox } from \"../utils/functions/message\";\nimport { onCollapseMenu } from \"../layout/LayoutActions\";\nimport { bodyRemoveClass, bodyAddClass } from \"../utils/functions/rootContainers\";\nimport * as actions from \"./VoiceActions\";\nimport { VoiceRecognition } from \"./VoiceRecognition\";\nimport { voiceControlStart } from \"./VoiceActions\";\nvar voiceRecognition; // private instance\n\nexport var VoiceMiddleware = function VoiceMiddleware(store) {\n  return function (next) {\n    return function (action) {\n      var result = next(action);\n\n      switch (action.type) {\n        case actions.VOICE_CONTROL_ON:\n          playAudio(\"voice_on\");\n          bodyAddClass(\"voice-command-active\");\n\n          if (voiceRecognition) {\n            voiceRecognition = null;\n          }\n\n          voiceRecognition = new VoiceRecognition();\n          voiceRecognition.start();\n          store.dispatch(voiceControlStart());\n          break;\n\n        case actions.VOICE_CONTROL_OFF:\n          playAudio(\"voice_off\");\n          voiceRecognition.abort();\n          smallBox({\n            title: \"VOICE COMMAND OFF\",\n            content: \"Your voice commands has been successfully turned off. Click on the <i class='fa fa-microphone fa-lg fa-fw'></i> icon to turn it back on.\",\n            color: \"#40ac2b\",\n            sound_file: \"voice_off\",\n            timeout: 8000,\n            icon: \"fa fa-microphone-slash\"\n          });\n          bodyRemoveClass(\"voice-command-active\");\n          break;\n\n        case actions.VOICE_CONTROL_START:\n          bodyRemoveClass(\"service-not-allowed\");\n          bodyAddClass(\"service-allowed\");\n          break;\n\n        case actions.VOICE_CONTROL_ERROR:\n          bodyRemoveClass(\"service-allowed\");\n          bodyAddClass(\"service-not-allowed\");\n          break;\n\n        case actions.VOICE_CONTROL_MATCH:\n          smallBox({\n            title: action.payload,\n            content: \"loading...\",\n            color: \"#333\",\n            sound_file: config.sound_on ? \"voice_alert\" : null,\n            timeout: 2000\n          });\n          break;\n\n        case actions.VOICE_CONTROL_NO_MATCH:\n          smallBox({\n            title: \"Error: <strong>\" + ' \" ' + action.payload + ' \" ' + \"</strong> no match found!\",\n            content: \"Please speak clearly into the microphone\",\n            color: \"#a90329\",\n            timeout: 5000,\n            icon: \"fa fa-microphone\"\n          });\n          break;\n\n        case actions.VOICE_CONTROL_ACTION:\n          var event = respondToAction(action);\n\n          if (event) {\n            store.dispatch(event);\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      return result;\n    };\n  };\n};\nexport function respondToAction(action) {\n  switch (action.actionType) {\n    case \"voice\":\n      switch (action.payload) {\n        case \"help on\":\n          return actions.voiceControlShowHelp();\n\n        case \"help off\":\n          return actions.voiceControlHideHelp();\n\n        case \"stop\":\n          return actions.voiceControlOff();\n\n        default:\n          return;\n      }\n\n    case \"navigate\":\n      var hash = window.location.hash;\n\n      if (hash !== action.payload) {\n        window.location.hash = action.payload;\n      }\n\n      break;\n\n    case \"layout\":\n      switch (action.payload) {\n        case \"show navigation\":\n          return onCollapseMenu(false);\n\n        case \"hide navigation\":\n          return onCollapseMenu(true);\n\n        default:\n          return;\n      }\n\n    case \"sound\":\n      switch (action.payload) {\n        case \"mute\":\n          mute();\n          break;\n\n        case \"sound on\":\n          soundOn();\n          break;\n\n        default:\n          break;\n      }\n\n      break;\n\n    default:\n      break;\n  }\n}","map":{"version":3,"sources":["/opt/lampp/htdocs/reactApp/React_16.x/src/common/voice-control/VoiceMiddleware.js"],"names":["config","mute","soundOn","playAudio","smallBox","onCollapseMenu","bodyRemoveClass","bodyAddClass","actions","VoiceRecognition","voiceControlStart","voiceRecognition","VoiceMiddleware","store","next","action","result","type","VOICE_CONTROL_ON","start","dispatch","VOICE_CONTROL_OFF","abort","title","content","color","sound_file","timeout","icon","VOICE_CONTROL_START","VOICE_CONTROL_ERROR","VOICE_CONTROL_MATCH","payload","sound_on","VOICE_CONTROL_NO_MATCH","VOICE_CONTROL_ACTION","event","respondToAction","actionType","voiceControlShowHelp","voiceControlHideHelp","voiceControlOff","hash","window","location"],"mappings":"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","sourcesContent":["import { config } from \"../../config/config\";\nimport { mute, soundOn, playAudio } from \"../utils/functions/sound\";\nimport { smallBox } from \"../utils/functions/message\";\nimport { onCollapseMenu } from \"../layout/LayoutActions\";\nimport {\n  bodyRemoveClass,\n  bodyAddClass\n} from \"../utils/functions/rootContainers\";\n\nimport * as actions from \"./VoiceActions\";\nimport { VoiceRecognition } from \"./VoiceRecognition\";\nimport { voiceControlStart } from \"./VoiceActions\";\n\nlet voiceRecognition; // private instance\n\nexport const VoiceMiddleware = store => next => action => {\n  const result = next(action);\n\n  switch (action.type) {\n    case actions.VOICE_CONTROL_ON:\n      playAudio(\"voice_on\");\n\n      bodyAddClass(\"voice-command-active\");\n\n      if (voiceRecognition) {\n        voiceRecognition = null;\n      }\n\n      voiceRecognition = new VoiceRecognition();\n      voiceRecognition.start();\n      store.dispatch(voiceControlStart());\n\n      break;\n\n    case actions.VOICE_CONTROL_OFF:\n      playAudio(\"voice_off\");\n      voiceRecognition.abort();\n      smallBox({\n        title: \"VOICE COMMAND OFF\",\n        content:\n          \"Your voice commands has been successfully turned off. Click on the <i class='fa fa-microphone fa-lg fa-fw'></i> icon to turn it back on.\",\n        color: \"#40ac2b\",\n        sound_file: \"voice_off\",\n        timeout: 8000,\n        icon: \"fa fa-microphone-slash\"\n      });\n      bodyRemoveClass(\"voice-command-active\");\n      break;\n    case actions.VOICE_CONTROL_START:\n      bodyRemoveClass(\"service-not-allowed\");\n      bodyAddClass(\"service-allowed\");\n      break;\n    case actions.VOICE_CONTROL_ERROR:\n      bodyRemoveClass(\"service-allowed\");\n      bodyAddClass(\"service-not-allowed\");\n      break;\n    case actions.VOICE_CONTROL_MATCH:\n      smallBox({\n        title: action.payload,\n        content: \"loading...\",\n        color: \"#333\",\n        sound_file: config.sound_on ? \"voice_alert\" : null,\n        timeout: 2000\n      });\n      break;\n    case actions.VOICE_CONTROL_NO_MATCH:\n      smallBox({\n        title:\n          \"Error: <strong>\" +\n          ' \" ' +\n          action.payload +\n          ' \" ' +\n          \"</strong> no match found!\",\n        content: \"Please speak clearly into the microphone\",\n        color: \"#a90329\",\n        timeout: 5000,\n        icon: \"fa fa-microphone\"\n      });\n      break;\n\n    case actions.VOICE_CONTROL_ACTION:\n      const event = respondToAction(action);\n      if (event) {\n        store.dispatch(event);\n      }\n      break;\n\n    default:\n      break;\n  }\n\n  return result;\n};\n\nexport function respondToAction(action) {\n  switch (action.actionType) {\n    case \"voice\":\n      switch (action.payload) {\n        case \"help on\":\n          return actions.voiceControlShowHelp();\n        case \"help off\":\n          return actions.voiceControlHideHelp();\n        case \"stop\":\n          return actions.voiceControlOff();\n        default:\n          return;\n      }\n    case \"navigate\":\n      const hash = window.location.hash;\n      if (hash !== action.payload) {\n        window.location.hash = action.payload;\n      }\n      break;\n\n    case \"layout\":\n      switch (action.payload) {\n        case \"show navigation\":\n          return onCollapseMenu(false);\n        case \"hide navigation\":\n          return onCollapseMenu(true);\n        default:\n          return;\n      }\n    case \"sound\":\n      switch (action.payload) {\n        case \"mute\":\n          mute();\n          break;\n        case \"sound on\":\n          soundOn();\n          break;\n        default:\n          break;\n      }\n      break;\n\n    default:\n      break;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}